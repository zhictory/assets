{"remainingRequest":"C:\\Users\\Randolf Zhang\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\vue\\App.vue?vue&type=style&index=0&id=4e7e1b24&lang=less&scoped=true&","dependencies":[{"path":"D:\\Workspace\\vue\\App.vue","mtime":1642177874410},{"path":"C:\\Users\\Randolf Zhang\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Randolf Zhang\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Randolf Zhang\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Workspace\\vue\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Randolf Zhang\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Randolf Zhang\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucHJvZ3Jlc3Mtb3V0ZXJCb3ggew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIC5wcm8tc3ZnIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgLmNpcmNsZSB7DQogICAgICAvLyBzdHJva2U6ICNFOUVCRUQ7DQogICAgICBzdHJva2UtbGluZWNhcDogcm91bmQ7DQogICAgfQ0KICAgIC5jaXJjbGUtZmlsdGVyIHsNCiAgICAgIHN0cm9rZTogIzg2YzFmZjsNCiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlciBjZW50ZXI7DQogICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpOw0KICAgIH0NCiAgICAucGF0aC1JIHsNCiAgICAgIGZpbGw6IHRyYW5zcGFyZW50Ow0KICAgICAgLy8gc3Ryb2tlOiB1cmwoI2NpcmNsZUNvbG9yKTsNCiAgICAgIHN0cm9rZS1saW5lY2FwOiByb3VuZDsNCiAgICB9DQogICAgLmZpbHRlciB7DQogICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyOw0KICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgfQ0KICAgIC5wYXRoLUlJIHsNCiAgICAgIGZpbGw6IHRyYW5zcGFyZW50Ow0KICAgICAgc3Ryb2tlOiAjMzQ2MGY4Ow0KICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjsNCiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDExOWRlZyk7DQogICAgICBzdHJva2UtbGluZWNhcDogcm91bmQ7DQogICAgfQ0KICAgIC5wYXRoLUlJSSB7DQogICAgICBmaWxsOiB0cmFuc3BhcmVudDsNCiAgICAgIHN0cm9rZTogdXJsKCNjaXJjbGVDb2xvckkpOw0KICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjsNCiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDIzOWRlZyk7DQogICAgICBzdHJva2UtbGluZWNhcDogcm91bmQ7DQogICAgfQ0KICAgIC5wYXRoLUlJSUkgew0KICAgICAgZmlsbDogdHJhbnNwYXJlbnQ7DQogICAgICBzdHJva2U6IHVybCgjY2lyY2xlQ29sb3JJSSk7DQogICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyOw0KICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kOw0KICAgICAgYW5pbWF0aW9uLW5hbWU6IHJvdGF0ZUFuaW1hdGlvbjsNCiAgICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogM3M7DQogICAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTsNCiAgICAgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGxpbmVhcjsNCiAgICB9DQogICAgLnRleHQtYm94IHsNCiAgICAgIHRleHQtYW5jaG9yOiBtaWRkbGU7DQogICAgICBmb250LWZhbWlseTogSGFybW9ueUhlaVRpOw0KICAgICAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgICAgIC50ZXh0LW51bWJlciB7DQogICAgICAgIGZvbnQtc2l6ZTogNnJlbTsNCiAgICAgICAgZmlsbDogdmFyKC0tZm9udCk7DQogICAgICB9DQogICAgICAudGV4dC1zeW1ib2wgew0KICAgICAgICBmb250LXNpemU6IDEuNnJlbTsNCiAgICAgICAgZmlsbDogdmFyKC0tZm9udF9ncmF5KTsNCiAgICAgIH0NCiAgICB9DQogICAgLnRleHQtZWRpdGlvbiB7DQogICAgICB0ZXh0LWFuY2hvcjogbWlkZGxlOw0KICAgICAgZm9udC1zaXplOiAxLjZyZW07DQogICAgICBmb250LWZhbWlseTogSGFybW9ueUhlaVRpOw0KICAgICAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgICAgIGxpbmUtaGVpZ2h0OiAyLjJyZW07DQogICAgICBmaWxsOiB2YXIoLS1mb250X2dyYXkpOw0KICAgIH0NCiAgfQ0KICAuaWNvbi1ib3ggew0KICAgIHdpZHRoOiA0LjhyZW07DQogICAgaGVpZ2h0OiA0LjhyZW07DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogY2FsYyg1MCUgLSAzNnB4KTsNCiAgICBsZWZ0OiBjYWxjKDUwJSAtIDI0cHgpOw0KICB9DQp9DQpAa2V5ZnJhbWVzIHJvdGF0ZUFuaW1hdGlvbiB7DQogIDAlIHsNCiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgfQ0KICAxMDAlIHsNCiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICB9DQp9DQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":".","sourcesContent":["<template>\r\n  <div class=\"progress-outerBox\" :style=\"widthHeight\" :class=\"{ showShadow: progressNum > 60 }\" ref=\"outerBox\">\r\n    <svg class=\"pro-svg\">\r\n      <defs>\r\n        <filter id=\"f1\">\r\n          <feGaussianBlur result=\"Gau1\" in=\"SourceGraphic\" stdDeviation=\"4\" />\r\n          <feOffset dx=\"-4\" dy=\"5\" />\r\n          <feGaussianBlur out=\"Gau2\" result=\"Gau2\" stdDeviation=\"2\" />\r\n          <fecomposite in=\"Gau1\" in2=\"SourceAlpha\" operator=\"in\"></fecomposite>\r\n        </filter>\r\n        <!-- 33%进度前渐变颜色 -->\r\n        <linearGradient id=\"circleColor\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n          <stop offset=\"0%\" style=\"stop-color: #86c1ff\" />\r\n          <stop offset=\"100%\" style=\"stop-color: #2b5bf9\" />\r\n        </linearGradient>\r\n        <!-- 66%进度后渐变颜色 -->\r\n        <linearGradient id=\"circleColorI\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n          <stop offset=\"0%\" style=\"stop-color: #3460f8\" />\r\n          <stop offset=\"100%\" style=\"stop-color: #2b5bf9\" />\r\n        </linearGradient>\r\n        <!-- 检查更新条渐变颜色 -->\r\n        <linearGradient id=\"circleColorII\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n          <stop offset=\"0%\" :style=\"{ stopColor: isDark ? '#1A1A1A' : '#E6EAED' }\" />\r\n          <stop offset=\"100%\" style=\"stop-color: #2b5bf9\" />\r\n        </linearGradient>\r\n      </defs>\r\n\r\n      <!-- 阴影 -->\r\n      <template v-if=\"state == 2\">\r\n        <circle\r\n          :cx=\"boxR\"\r\n          :cy=\"boxR\"\r\n          :r=\"circleR\"\r\n          class=\"circle circle-filter\"\r\n          fill=\"none\"\r\n          :stroke-dasharray=\"progressNum * ((2 * 3.14 * circleR) / 100) + ' 10000'\"\r\n          stroke-width=\"10%\"\r\n          filter=\"url(#f1)\"\r\n        ></circle>\r\n      </template>\r\n\r\n      <!-- 底圈 -->\r\n      <circle\r\n        :cx=\"boxR\"\r\n        :cy=\"boxR\"\r\n        :r=\"circleR\"\r\n        class=\"circle\"\r\n        fill=\"none\"\r\n        :stroke-dasharray=\"2 * 3.14 * circleR + ' 10000'\"\r\n        stroke-width=\"10%\"\r\n        :stroke=\"isDark ? '#1A1A1A' : '#E9EBED'\"\r\n      ></circle>\r\n      <!-- 进度条 -->\r\n      <template v-if=\"state == 2\">\r\n        <!-- 阶段二 -->\r\n        <path :d=\"pathII\" stroke-width=\"10%\" class=\"path-II\" v-show=\"progressNum > 33\"></path>\r\n        <!-- 阶段一 -->\r\n        <path :d=\"pathI\" stroke-width=\"10%\" class=\"path-I\" :stroke=\"progressNum > 5 ? 'url(#circleColor)' : '#2B5BF9'\" v-show=\"progressNum > 0\"></path>\r\n        <!-- 阶段三 -->\r\n        <path :d=\"pathIII\" stroke-width=\"10%\" class=\"path-III\" v-show=\"progressNum > 66\"></path>\r\n      </template>\r\n      <!-- 检查更新条 -->\r\n      <template v-if=\"state == 1\">\r\n        <path :d=\"pathIIII\" stroke-width=\"10%\" class=\"path-IIII\"></path>\r\n      </template>\r\n      <!-- 进度显示 -->\r\n      <template v-if=\"state == 2\">\r\n        <text :x=\"boxR\" :y=\"boxR + boxR * 0.1\" class=\"text-box\">\r\n          <tspan class=\"text-number\">{{ progressNum > 100 ? 100 : progressNum }}</tspan>\r\n          <tspan class=\"text-symbol\">%</tspan>\r\n        </text>\r\n      </template>\r\n      <!-- 版本号 -->\r\n      <text :x=\"boxR\" :y=\"boxR + boxR * 0.4\" class=\"text-edition\">\r\n        {{ version }}\r\n      </text>\r\n    </svg>\r\n    <img :src=\"iconPath\" alt=\"\" class=\"icon-box\" v-if=\"state < 2\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"progress-bar\",\r\n  props: {\r\n    // 更新进度(必须 1-100)\r\n    progressNum: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    // 版本号(必须)\r\n    version: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    // 状态  0 无状态  1 检查更新  2 下载\r\n    state: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n    iconPath: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    // 基于 宽高为 252px 的大小进行等比缩放（以避免随意改变大小后造成的位置错位）\r\n    multiple: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      updataIcon: \"\",\r\n      isUpdate: false,\r\n      boxR: 0,\r\n      circleR: 0,\r\n      startX: 0,\r\n      startY: 0,\r\n      pathI: \"\",\r\n      pathII: \"\",\r\n      pathIII: \"\",\r\n      pathIIII: \"\",\r\n      fill: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    isDark() {\r\n      return window.isDark;\r\n    },\r\n    widthHeight() {\r\n      return {\r\n        width: 25.2 * this.multiple + \"rem\",\r\n        height: 25.2 * this.multiple + \"rem\",\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    progressNum(val) {\r\n      this.getPath(val);\r\n    },\r\n    state: {\r\n      handler(val) {\r\n        console.log(\"11111111111111111111111111\", val);\r\n        let deg = 0;\r\n        if (val == 1) {\r\n          deg = 90;\r\n        } else if (val == 2) {\r\n          this.getPath(this.progressNum);\r\n        }\r\n        let endX = this.startX + this.circleR * Math.sin(((2 * Math.PI) / 360) * deg);\r\n        let endY = this.startY + this.circleR - this.circleR * Math.cos(((2 * Math.PI) / 360) * deg);\r\n        this.pathIIII = `\r\n            M ${this.startX} ${this.startY}\r\n            A ${this.circleR} ${this.circleR} 0 0 1 ${endX} ${endY}`;\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      let width = this.$refs.outerBox.clientHeight;\r\n      console.log(width);\r\n      this.boxR = width / 2;\r\n      this.startX = this.boxR;\r\n      this.startY = this.boxR * 0.2;\r\n      this.circleR = this.boxR - this.boxR * 0.2;\r\n      if (this.progressNum > 0) {\r\n        this.getPath(this.progressNum);\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    getPath(number) {\r\n      if (number > 33 && number <= 66) {\r\n        number = number - 33;\r\n      } else if (number > 66) {\r\n        number = number - 66;\r\n      }\r\n      let deg = number * (120 / 33);\r\n      deg = deg > 120 ? 120 : deg;\r\n      if (this.progressNum < 33) {\r\n        this.fill = 0;\r\n        this.fillPathI(deg);\r\n      } else if (this.progressNum > 33 && this.progressNum <= 66) {\r\n        this.fill = 1;\r\n        this.fillPathII(deg);\r\n      } else if (this.progressNum > 66) {\r\n        this.fill = 2;\r\n        this.fillPathIII(deg);\r\n      }\r\n    },\r\n    fillPathI(deg) {\r\n      let endX = this.startX + this.circleR * Math.sin(((2 * Math.PI) / 360) * deg);\r\n      let endY = this.startY + this.circleR - this.circleR * Math.cos(((2 * Math.PI) / 360) * deg);\r\n      this.pathI = `\r\n          M ${this.startX} ${this.startY}\r\n          A ${this.circleR} ${this.circleR} 0 0 1 ${endX} ${endY}`;\r\n    },\r\n    fillPathII(deg) {\r\n      if (this.fill >= 1) {\r\n        this.fillPathI(120);\r\n      }\r\n      let endX = this.startX + this.circleR * Math.sin(((2 * Math.PI) / 360) * deg);\r\n      let endY = this.startY + this.circleR - this.circleR * Math.cos(((2 * Math.PI) / 360) * deg);\r\n      this.pathII = `\r\n          M ${this.startX} ${this.startY}\r\n          A ${this.circleR} ${this.circleR} 0 0 1 ${endX} ${endY}`;\r\n    },\r\n    fillPathIII(deg) {\r\n      if (this.fill >= 2) {\r\n        this.fillPathII(120);\r\n      }\r\n      let endX = this.startX + this.circleR * Math.sin(((2 * Math.PI) / 360) * deg);\r\n      let endY = this.startY + this.circleR - this.circleR * Math.cos(((2 * Math.PI) / 360) * deg);\r\n      this.pathIII = `\r\n          M ${this.startX} ${this.startY}\r\n          A ${this.circleR} ${this.circleR} 0 0 1 ${endX} ${endY}`;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.progress-outerBox {\r\n  position: relative;\r\n  .pro-svg {\r\n    width: 100%;\r\n    height: 100%;\r\n    .circle {\r\n      // stroke: #E9EBED;\r\n      stroke-linecap: round;\r\n    }\r\n    .circle-filter {\r\n      stroke: #86c1ff;\r\n      transform-origin: center center;\r\n      transform: rotate(-90deg);\r\n    }\r\n    .path-I {\r\n      fill: transparent;\r\n      // stroke: url(#circleColor);\r\n      stroke-linecap: round;\r\n    }\r\n    .filter {\r\n      transform-origin: center center;\r\n      transform: rotate(0deg);\r\n    }\r\n    .path-II {\r\n      fill: transparent;\r\n      stroke: #3460f8;\r\n      transform-origin: center center;\r\n      transform: rotate(119deg);\r\n      stroke-linecap: round;\r\n    }\r\n    .path-III {\r\n      fill: transparent;\r\n      stroke: url(#circleColorI);\r\n      transform-origin: center center;\r\n      transform: rotate(239deg);\r\n      stroke-linecap: round;\r\n    }\r\n    .path-IIII {\r\n      fill: transparent;\r\n      stroke: url(#circleColorII);\r\n      transform-origin: center center;\r\n      stroke-linecap: round;\r\n      animation-name: rotateAnimation;\r\n      animation-duration: 3s;\r\n      animation-iteration-count: infinite;\r\n      animation-timing-function: linear;\r\n    }\r\n    .text-box {\r\n      text-anchor: middle;\r\n      font-family: HarmonyHeiTi;\r\n      font-weight: 500;\r\n      .text-number {\r\n        font-size: 6rem;\r\n        fill: var(--font);\r\n      }\r\n      .text-symbol {\r\n        font-size: 1.6rem;\r\n        fill: var(--font_gray);\r\n      }\r\n    }\r\n    .text-edition {\r\n      text-anchor: middle;\r\n      font-size: 1.6rem;\r\n      font-family: HarmonyHeiTi;\r\n      font-weight: 500;\r\n      line-height: 2.2rem;\r\n      fill: var(--font_gray);\r\n    }\r\n  }\r\n  .icon-box {\r\n    width: 4.8rem;\r\n    height: 4.8rem;\r\n    position: absolute;\r\n    top: calc(50% - 36px);\r\n    left: calc(50% - 24px);\r\n  }\r\n}\r\n@keyframes rotateAnimation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n"]}]}